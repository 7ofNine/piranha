MACRO(PIRANHA_COMPILER_LINKER_SETTINGS)
  # Setup variables.
  SET(ICC_C_COMPILER FALSE)
  SET(GCC_C_COMPILER FALSE)
  SET(ICC_CXX_COMPILER FALSE)
  SET(GCC_CXX_COMPILER FALSE)
  SET(GCC_SPECIFIC_FLAGS "-Wall")
  # Disable it temporarily, it consumes tons of RAM.
  #SET(ICC_SPECIFIC_FLAGS "-ipo")
  SET(ICC_SPECIFIC_FLAGS "")
  SET(LINK_FLAGS "")
  # Establish compiler type. Supported: GCC, ICC.
  IF(${CMAKE_C_COMPILER} MATCHES "gcc")
    SET(GCC_C_COMPILER TRUE)
    SET(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} ${GCC_SPECIFIC_FLAGS}")
  ENDIF(${CMAKE_C_COMPILER} MATCHES "gcc")
  IF(${CMAKE_CXX_COMPILER} MATCHES "(c\\+\\+|g\\+\\+?)")
    SET(GCC_CXX_COMPILER TRUE)
    SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} ${GCC_SPECIFIC_FLAGS}")
  ENDIF(${CMAKE_CXX_COMPILER} MATCHES "(c\\+\\+|g\\+\\+?)")
  IF(${CMAKE_C_COMPILER} MATCHES "icc")
    SET(ICC_C_COMPILER TRUE)
    SET(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} ${ICC_SPECIFIC_FLAGS}")
  ENDIF(${CMAKE_C_COMPILER} MATCHES "icc")
  IF(${CMAKE_CXX_COMPILER} MATCHES "icpc")
    SET(ICC_CXX_COMPILER TRUE)
    SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} ${ICC_SPECIFIC_FLAGS}")
  ENDIF(${CMAKE_CXX_COMPILER} MATCHES "icpc")

  IF(WIN32)
    # In MinGW we need the following flags.
    IF(GCC_C_COMPILER)
      SET(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -fdata-sections")
    ENDIF(GCC_C_COMPILER)
    IF(GCC_CXX_COMPILER)
      SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -fdata-sections")
      # Link flags set here because linker is C++'s.
      SET(LINK_FLAGS "${LINK_FLAGS} -Wl,--enable-runtime-pseudo-reloc")
    ENDIF(GCC_CXX_COMPILER)
  ENDIF(WIN32)
ENDMACRO (PIRANHA_COMPILER_LINKER_SETTINGS)
